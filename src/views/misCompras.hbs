{{> header }}

<div class="page-holder">
    <!-- navbar-->
    <div class="barranav">
        {{> navbar}}
    </div>
    

    <body style="font-size: 15px;">
        <center>
            <div class="container-fluid py-3">
                <table class="table table-striped table-bordered nowrap" style="text-align:center;" id="tabla-ventas">
                    <thead style="background-color: #495159; color:white;">
                        <tr>
                            <th>#</th>
                            <th>Nombre Cliente</th>
                            <th>Producto</th>
                            <th>Total</th>
                            <th>Descripción</th>
                            <th>Fecha</th>
                            <th>Estado</th>

                        </tr>
                    </thead>
                    <tbody>
                        {{#each ventas}}
                        <tr>
                            <td class="py-3 px-6 text-center">{{cont}}</td>
                            <td class="p-3 text-center">{{nombre}}</td>
                            <td> <a href="misComprasProductos/{{idVentas}}" style="color: #292b2c;"><i type="button"
                                        class="fa-sharp fa-solid fa-eye"></i></a></td>
                            <td class="p-3 text-center">{{total}}</td>
                            <td class="p-3 text-center">{{descripcion}}</td>
                            <td class="p-3 text-center">{{fecha}}</td>
                            <td class="p-3 text-center">
                                <!-- Utilizamos una clase común para el botón 'estado' y asignamos el valor del estado actual del cliente como un atributo de datos -->
                                <button class="btn estado-boton btn-sm" style="border-radius:8px;" disabled
                                    data-estado="{{estado}}">{{estado}}</button>
                            </td>
                        </tr>
                        <script>
                            // Seleccionamos todos los botones de clase 'estado-boton'
                            var botonesEstado = document.querySelectorAll(".estado-boton");

                            // Iteramos a través de cada botón y cambiamos la clase según el valor del atributo de datos 'data-estado'
                            botonesEstado.forEach(function (boton) {
                                var estado = boton.getAttribute("data-estado");

                                if (estado === "Contado") {
                                    boton.classList.add("btn-success");
                                    boton.classList.remove("btn-warning");
                                } else if (estado === "Plan separe") {
                                    boton.classList.add("btn-warning");
                                    boton.classList.remove("btn-success");
                                } else {
                                    // Si el estado no coincide con 'Activo' ni 'Inactivo', podemos manejar otras situaciones o no hacer ningún cambio en la clase del botón.
                                }
                            });
                        </script>
                        {{/each}}
                    </tbody>
                </table>
            </div>
        </center>

</div>
{{> footer}}
<script>
    function filtrarTabla() {
        var input = document.getElementById("buscar-input");
        var filtro = input.value.toUpperCase();
        var tabla = document.getElementById("tabla-ventas");
        var filas = tabla.getElementsByTagName("tr");

        for (var i = 0; i < filas.length; i++) {
            var celdaNombre = filas[i].getElementsByTagName("td")[1];
            var celdaFecha = filas[i].getElementsByTagName("td")[5];
            var celdaTotal = filas[i].getElementsByTagName("td")[3];

            if (celdaNombre && celdaFecha && celdaTotal) {
                var textoNombre = celdaNombre.textContent || celdaNombre.innerText;
                var textoFecha = celdaFecha.textContent || celdaFecha.innerText;
                var textoTotal = celdaTotal.textContent || celdaTotal.innerText;

                if (textoNombre.toUpperCase().indexOf(filtro) > -1 ||
                    textoFecha.toUpperCase().indexOf(filtro) > -1 ||
                    textoTotal.toUpperCase().indexOf(filtro) > -1) {
                    filas[i].style.display = "";
                } else {
                    filas[i].style.display = "none";
                }
            }
        }
    }
</script>

<!-- JavaScript files-->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css"
    integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
<script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="vendor/glightbox/js/glightbox.min.js"></script>
<script src="vendor/nouislider/nouislider.min.js"></script>
<script src="vendor/swiper/swiper-bundle.min.js"></script>
<script src="vendor/choices.js/public/assets/scripts/choices.min.js"></script>
<script src="js/front.js"></script>
<!-- DATATABLES -->
<!--Paginacion-->
<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
    crossorigin="anonymous"></script>


<!-- DataTables CSS -->
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap4.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.5.0/css/responsive.bootstrap4.min.css">

<!-- DataTables JavaScript -->
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap4.min.js"></script>
<script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>
<script src="https://cdn.datatables.net/responsive/2.5.0/js/responsive.bootstrap4.min.js"></script>

<!-- DataTables Language File (Spanish) -->
<script src="https://cdn.datatables.net/plug-ins/1.11.8/i18n/Spanish.json"></script>

<script>
        $(document).ready(function () {
            $('#tabla-ventas').DataTable({
                paging: true,
            ordering: true,
            searching: true,
            responsive: true,
            language: {
                url: 'https://cdn.datatables.net/plug-ins/1.11.8/i18n/Spanish.json',
                search: "Buscar:",
                info: "Mostrando _START_ a _END_ de _TOTAL_ entradas",
                infoEmpty: "Mostrando 0 a 0 de 0 entradas",
                infoFiltered: "(filtrado de _MAX_ entradas totales)",
                paginate: {
                    first: "Primero",
                    previous: "Anterior",
                    next: "Siguiente",
                    last: "Último"
                }
            },
            dom: '<"toolbar">frtip',

        });
});

</script>

</body>