<!doctype html>
<html lang="es">

{{>headerId}}

<style>
    .fa-arrow-left:hover {
        color: #fae603;
    }

    p {
        margin-bottom: 1%;
    }

    /* Add this style to your existing CSS */
    .table-container {
        max-height: 300px;
        height: auto;
        /* Adjust this value as per your requirement */
        overflow-y: auto;
        position: relative;
        /* Add this to enable positioning of thead */
    }

    /* Add this style to fix thead */
    .table-container table {
        position: relative;
    }

    .table-container thead {
        position: sticky;
        top: 0;
        z-index: 1;
    }

    /* Estilo para el último tr con clase table tf */
    .table-container .table.tf {
        position: sticky;
        bottom: 0;
        z-index: 2;
        /* Asegura que el tr fijo se superponga sobre los demás elementos */
        background-color: #282d32;
        color: white;
    }

    button {
        border-radius: 8px;
        border: 1px gray solid;
    }

    /* Estilos para el popover */
    .custom-popover {
        position: relative;
        max-width: 330px;
        border: 3px gray solid;
        /* Reemplaza esto con el color hexadecimal que corresponda a --bd-violet-bg */
        background-color: white;
        /* Reemplaza esto con el color hexadecimal que corresponda a --bd-violet-bg */
        color: black;
        /* Reemplaza esto con el color hexadecimal que corresponda a --bs-white */
        padding-left: 0;
        padding-right: 0;
        padding-top: 0;
        padding-bottom: 0;
    }

    /* Estilos para la flecha del popover */
    .custom-popover::before {
        content: "";
        position: absolute;
        top: 50%;
        left: -16px;
        /* Ubica la flecha justo a la izquierda del popover */
        border-width: 8px;
        border-style: solid;
        border-color: transparent black transparent transparent;
        /* Utiliza el color correspondiente a --bd-violet-bg */
        transform: translateY(-50%);
        border-right-color: gray;
        /* Agrega un borde negro de 1px a la derecha de la flecha */
    }
</style>

<!--Barra de navegación-->
{{>barId}}
<!--Barra de navegación-->
<br>
<br>
<br>
<a href="/compras" style="color:black; text-decoration:none; margin-left: 1%"><i class="fa fa-arrow-left fa-2x"></i></a>

<center>
    <div style="width: 99%;">
        <div class="row">

        <div class="col-xl-4 col-md-12">
            {{#each compra}}
            <!--<div class="card" style="width: 96%; border-radius: 0;">
            <div class="card-body" style="text-align: left;">
                <h5 class="card-title">Compra</h5>
                <p class="card-text"><b>Proveedor: </b>{{proveedor}}</p>
                <p class="card-text"><b>Recibo: </b>{{recibo}}</p>
                <p class="card-text"><b>Fecha recibo: </b>{{fechaRecibo}}</p>
                <p class="card-text"><b>Fecha registro: </b>{{fechaRegistro}}</p>
                </p>
            </div>
        </div>-->
            <div class="card" style="width: 100%; border-radius: 0;">
                <div class="card-body" style="text-align: left;">
                    <h5 class="card-title">Compra</h5>
                    <p class="card-text">
                        <small>
                            <b style="width: 40%; display: inline-block; text-align: left;">Proveedor:</b>
                            <span
                                style="width: 50%; display: inline-block; text-align: left; margin-left: 10px;">{{proveedor}}</span>
                        </small>
                    </p>
                    <p class="card-text">
                        <small>
                            <b style="width: 40%; display: inline-block; text-align: left;">Recibo:</b>
                            <span
                                style="width: 50%; display: inline-block; text-align: left; margin-left: 10px;">{{recibo}}</span>
                        </small>
                    </p>
                    <p class="card-text">
                        <small>


                            <b style="width: 40%; display: inline-block; text-align: left;">Fecha recibo:</b>
                            <span
                                style="width: 50%; display: inline-block; text-align: left; margin-left: 10px;">{{fechaRecibo}}</span>
                        </small>
                    </p>
                    <p class="card-text">
                        <small> <b style="width: 40%; display: inline-block; text-align: left;">Fecha registro:</b>
                            <span
                                style="width: 50%; display: inline-block; text-align: left; margin-left: 10px;">{{fechaRegistro}}</span>
                        </small>
                    </p>
                </div>
            </div>



            {{/each}}
        </div>

        <div class="col-xl-8 col-md-12">
            <!--Start Card #3-->
            <div class="card" style="width: 100%; border-radius: 0;">
                <div class="card-body" style="text-align: left;">
                    <h5 class="card-title">Insumos adquiridos</h5>
                    <!--Start Table-->
                    <div class="table-container">
                        <table class="table table-sm">
                            <thead class="table" style="background-color: #282d32; color:white;">
                                <tr style="text-align: center;">
                                    <th> #</th>
                                    <th>Insumo</th>
                                    <th>Precio</th>
                                    <th>Cantidad</th>
                                    <th>SubTotal</th>
                                    <th>%Iva</th>
                                    <th>Iva</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                {{#each detallescompra}}
                                <tr class="table">
                                    <td class="py-2 px-6 text-center">{{cont}}</td>
                                    <td class="p-2 text-center">
                                        <button data-bs-toggle="popover" data-bs-trigger="hover"
                                            data-bs-custom-class="custom-popover" data-bs-title="<b>Insumo {{cont}}</b>"
                                            data-bs-html="true" data-bs-content="
                                    <div class='row'>
                                        <div class='col-md-4'>
                                            <img src='https://icons.iconarchive.com/icons/fa-team/fontawesome/512/FontAwesome-Box-Open-icon.png' width='100' />
                                        </div>
                                        <div class='col-md-8'>
                                            <b>Nombre:</b> {{nombreI}}<br>
                                            <b>Medida:</b> {{medidaI}}<br>
                                            <b>Stock:</b> {{cantidadI}}<br>
                                        </div>
                                    </div>
                                ">{{nombreI}} <i class="fas fa-box-open" style="color: black"></i></button>
                                    </td>
                                    <td class="p-3 text-center">{{precio}}</td>
                                    <td class="p-3 text-center">{{cantidad}}</td>
                                    <td class="p-3 text-center">{{monto}}</td>
                                    <td class="p-3 text-center">{{porcentajeIva}}</td>
                                    <td class="p-3 text-center">{{iva}}</td>
                                    <td class="py-2 px-6 text-center">{{total}}</td>
                                </tr>
                                {{/each}}
                                {{#each compra}}
                                <tr class="table tf">
                                    <td class="py-2 px-6 text-center"><b>Total</b></td>
                                    <td class="p-3 text-center" colspan="3"></td>
                                    <td class="p-3 text-center"><b>{{monto}}</b></td>
                                    <td class="p-3 text-center"></td>
                                    <td class="p-3 text-center"><b>{{iva}}</b></td>

                                    <td class="py-2 px-6 text-center"><b>{{total}}</b></td>
                                </tr>
                                {{/each}}
                            </tbody>
                        </table>
                    </div>
                    <!--End Table-->
                </div>
            </div>


            <!--End Card #3-->
        </div>



    </div>
    </div>
    

</center>
</body>

<!--Bootstrap-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
<!--Validacion nav bar-->
{{#if asignacion}}
<script>
    var permisosInput = document.querySelector('#permisosInput');
    var permisosValue = permisosInput.value;

    var palabras = permisosValue.split(',');

    var menuItems = document.querySelectorAll('.nav li');

    menuItems.forEach(function (item) {
        var items = item.querySelector('p').textContent.trim().toLowerCase();

        if (palabras.includes(items)) {
            item.style.display = 'block';
        } else {
            item.style.display = 'none';
        }
    });
</script>
{{/if}}

<script>
    // Inicializar los popovers
    var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'));
    var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
        return new bootstrap.Popover(popoverTriggerEl);
    });
</script>

<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
    crossorigin="anonymous"></script>
<!--   Core JS Files   -->
<script src="/assets/js/core/jquery.min.js"></script>
<script src="/assets/js/core/popper.min.js"></script>
<script src="/assets/js/core/bootstrap.min.js"></script>
<script src="/assets/js/plugins/perfect-scrollbar.jquery.min.js"></script>
<!-- Chart JS -->
<script src="/assets/js/plugins/chartjs.min.js"></script>
<!--  Notifications Plugin    -->
<script src="/assets/js/plugins/bootstrap-notify.js"></script>
<!-- Control Center for Now Ui Dashboard: parallax effects, scripts for the example pages etc -->
<script src="/assets/js/now-ui-dashboard.min.js?v=1.5.0" type="text/javascript"></script>




{{!--
<script src="assets/js/ValidacionEliminarInsumo.js"></script>
<!--  Google Maps Plugin-->
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE"></script>
--}}