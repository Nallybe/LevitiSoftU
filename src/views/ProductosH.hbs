{{> header }}

<body>
    <!-- navbar-->
    <header class="header bg-white">
        <div class="container px-lg-3">
            {{> navbar}}
        </div>
    </header>
    <style>
        .carta {
            width: 15rem;
            height: 240px;
            text-align: center;
            margin-left: 7px;
            overflow: hidden;
            transition: 0.5s;
            object-fit: cover;
        }

        .contenedorcarta {
            margin: 0 auto;

        }

        .carta:hover {
            transform: scale(1.2);
        }

        a {
            text-decoration: none;
        }
    </style>

    <section class="py-3">
        <header class="text-center mb-4">
            <h2>Productos</h2>
        </header>
        <div class="container p-0">
            <div class="row">

                <!-- SHOP LISTING-->
                        <!-- PRODUCT-->
                        {{#each productos}}
                        <div class="col-lg-4 col-md-4 " >
                            <div class="product productosI text-center">
                                <div class="" >
                                    <div class="badge text-white "></div><a class="d-block" href="#"><img
                                            class="" width="200" height="200" src="assets/img/Productos/{{imagen}}" alt="..."></a>
                                </div>
                                <h6> <a class="reset-anchor" href="detail.html">{{nombre}}</a></h6>
                                <p class="small text-muted">{{precio}}</p>
                                <p class="small text-muted">{{stock}}</p>
                            </div>
                        </div>
                        {{/each}}
                    <nav aria-label="Page navigation example" class="Page">
                        <ul class="pagination">
                            <li class="page-item">
                                <a class="page-link" href="#" data-page="prev" aria-label="Previous">
                                    <span aria-hidden="true">&laquo;</span>
                                </a>
                            </li>
                            <!-- Add the dynamic page links here using JavaScript -->
                            <li class="page-item">
                                <a class="page-link" href="#" data-page="next" aria-label="Next">
                                    <span aria-hidden="true">&raquo;</span>
                                </a>
                            </li>
                        </ul>
                    </nav>


                </div>

            </div>
    </section>
    <div class="whatsapp-container">
      <a href="https://wa.me/5211234567890?text=Me%20gustaría%20saber%20el%20precio%20del%20coche" class="whatsapp"
        target="_blank">
        <i class="fab fa-whatsapp whatsapp-icon"></i>
        <div class="whatsapp-tooltip p-1">Chatea con nosotros</div>
      </a>
      
    </div>
    {{>footer}}
    <!-- JavaScript files-->

    <script>
        const productos = {{productos}}; // Reemplaza esta línea con los datos reales de tus productos

        const itemsPerRow = 3; // Cambia esto según la cantidad de columnas que desees mostrar por fila
        const rowsPerPage = 4; // Cambia esto para definir cuántas filas quieres mostrar por página
        const itemsPerPage = itemsPerRow * rowsPerPage;

        let currentPage = 1;

        // Función para calcular el número total de páginas necesarias
        function getTotalPages() {
            return Math.ceil(productos.length / itemsPerPage);
        }

        // Función para mostrar los productos de una página específica
        function showProducts(page) {
            const startIndex = (page - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const productsToDisplay = productos.slice(startIndex, endIndex);

            const productElements = document.querySelectorAll('.product');
            productElements.forEach((element, index) => {
                if (productsToDisplay[index]) {
                    element.style.display = 'block';
                    element.querySelector('img').src = `assets/img/Productos/${productsToDisplay[index].imagen}`;
                    element.querySelector('a').href = 'detail.html'; // Actualiza el enlace si es necesario
                    element.querySelector('h6 a').textContent = productsToDisplay[index].nombre;
                    element.querySelector('.small.text-muted:nth-of-type(1)').textContent = productsToDisplay[index].precio;
                    element.querySelector('.small.text-muted:nth-of-type(2)').textContent = productsToDisplay[index].stock;
                } else {
                    element.style.display = 'none';
                }
            });
        }

        // Función para cambiar de página al hacer clic en un enlace de paginación
        function changePage(page) {
            if (page === 'prev' && currentPage > 1) {
                currentPage -= 1;
            } else if (page === 'next' && currentPage < getTotalPages()) {
                currentPage += 1;
            } else if (!isNaN(page)) {
                currentPage = parseInt(page);
            }
            showProducts(currentPage);
        }

        // Agrega el evento click a los enlaces de paginación
        const pageLinks = document.querySelectorAll('.page-link');
        pageLinks.forEach(link => {
            link.addEventListener('click', event => {
                event.preventDefault();
                const page = event.target.dataset.page;
                changePage(page);
            });
        });

        // Mostrar la página inicial
        showProducts(currentPage);
    </script>




    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
    <script src="vendor/glightbox/js/glightbox.min.js"></script>
    <script src="vendor/nouislider/nouislider.min.js"></script>
    <script src="vendor/swiper/swiper-bundle.min.js"></script>
    <script src="vendor/choices.js/public/assets/scripts/choices.min.js"></script>
    <script src="js/front.js"></script>
    <!-- FontAwesome CSS - loading as last, so it doesn't block rendering-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css"
        integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">

</body>

</html>